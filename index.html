<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>OMNISCIENTRIX MAP vΩ.3 — Life Detection Engine</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
/* ===== GLOBAL ===== */
html, body {
  margin: 0;
  padding: 0;
  overflow: hidden;
  background: #000000;
  font-family: Arial, sans-serif;
}

/* ===== UI PANEL ===== */
#panel {
  position: fixed;
  top: 12px;
  left: 12px;
  background: rgba(0,0,0,0.55);
  padding: 15px;
  width: 300px;
  border-radius: 12px;
  border: 1px solid #00A7FF55;
  color: #9FEAFF;
  backdrop-filter: blur(8px);
}

#panel h1 {
  font-size: 22px;
  margin: 0 0 10px 0;
  color: #00CFFF;
  text-shadow: 0 0 6px #0077aa;
}

#panel h2 {
  font-size: 14px;
  margin: 12px 0 4px 0;
  color: #00A7FF;
}

#panel p {
  font-size: 12px;
  color: #b9f2ff;
}

/* RESULTS BOX */
#info {
  margin-top: 10px;
  padding: 10px;
  border-radius: 6px;
  border: 1px solid #006688;
  background: rgba(0,0,0,0.35);
  font-size: 12px;
  color: #b9f2ff;
}

/* FILTER BUTTONS */
button {
  background: #003344;
  color: #9FEAFF;
  border: 1px solid #00A7FF55;
  border-radius: 6px;
  padding: 6px 10px;
  margin: 3px 0;
  cursor: pointer;
  width: 100%;
  font-size: 12px;
}
button:hover {
  background: #005577;
}

/* FOOTER */
#footer {
  position: fixed;
  bottom: 12px;
  left: 50%; transform: translateX(-50%);
  color: #00A7FF;
  font-size: 12px;
}
#footer a { color: #00CFFF; text-decoration:none; }
</style>
</head>

<body>

<div id="panel">
  <h1>OMNISCIENTRIX MAP vΩ.3</h1>

  <p>Scroll = Zoom · Drag = Pan · Click planets = Inspect</p>

  <h2>Map Mode</h2>
  <button onclick="mode='life'">Life Probability Mode</button>
  <button onclick="mode='esi'">Earth Similarity Mode</button>
  <button onclick="mode='temp'">Temperature Mode</button>
  <button onclick="mode='star'">Stellar Type Mode</button>

  <h2>Selected Planet</h2>
  <div id="info">No planet selected.</div>
</div>

<canvas id="universe"></canvas>

<div id="footer">
  © 2025 Cornelius Aurelius ·  
  <a href="https://zenodo.org/records/17362534" target="_blank">The Peace License</a>
</div>

<script>
/* ============================================================
   OMNISCIENTRIX MAP vΩ.3
   Ultra-Fast Scientific Engine (Single File Edition)
============================================================ */

/* ===== Canvas Setup ===== */
const canvas = document.getElementById("universe");
const ctx = canvas.getContext("2d");

function resize() {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
resize(); window.onresize = resize;

/* ===== CAMERA ===== */
let cam = { x:0, y:0, zoom:1.0, dragging:false, lx:0, ly:0 };

canvas.addEventListener("mousedown", e=>{
  cam.dragging=true;
  cam.lx=e.clientX; cam.ly=e.clientY;
});
canvas.addEventListener("mouseup", ()=>cam.dragging=false);
canvas.addEventListener("mouseleave", ()=>cam.dragging=false);

canvas.addEventListener("mousemove", e=>{
  if (cam.dragging) {
    cam.x += (e.clientX - cam.lx)/cam.zoom;
    cam.y += (e.clientY - cam.ly)/cam.zoom;
    cam.lx = e.clientX;
    cam.ly = e.clientY;
  }
});

/* Zoom */
canvas.addEventListener("wheel", e=>{
  cam.zoom = Math.min(3, Math.max(0.2, cam.zoom + -e.deltaY*0.0012));
});

/* ===== Nebula Background ===== */
function nebula() {
  let g = ctx.createRadialGradient(
    canvas.width/2, canvas.height/2, 20,
    canvas.width/2, canvas.height/2, canvas.width*0.8
  );
  g.addColorStop(0, "rgba(0,50,120,0.28)");
  g.addColorStop(1, "rgba(0,0,0,0)");
  ctx.fillStyle = g;
  ctx.fillRect(0,0,canvas.width,canvas.height);
}

/* ===== Star Distribution (25,000) ===== */
const STAR_COUNT = 25000;
let stars=[];
for(let i=0;i<STAR_COUNT;i++){
  stars.push({
    x:(Math.random()-0.5)*9000,
    y:(Math.random()-0.5)*9000,
    z:300+Math.random()*6000,
    b:0.3+Math.random()*0.7,
    type: Math.random() // OBAFGKM approx
  });
}

/* Stellar type → colour */
function starColor(t, ghz) {
  if (t<0.02) return `rgba(150,190,255,${0.3+ghz*0.6})`;  // O
  if (t<0.1)  return `rgba(120,160,255,${0.3+ghz*0.6})`;  // B
  if (t<0.3)  return `rgba(100,140,255,${0.3+ghz*0.6})`;  // A
  if (t<0.5)  return `rgba(80,160,255,${0.3+ghz*0.6})`;   // F
  if (t<0.7)  return `rgba(255,255,200,${0.3+ghz*0.6})`;  // G
  if (t<0.9)  return `rgba(255,180,120,${0.3+ghz*0.6})`;  // K
  return         `rgba(255,120,80,${0.3+ghz*0.6})`;       // M
}

/* ===== GHZ (Scientific Model) ===== */
function ghzWeight(x,y){
  const r=Math.sqrt(x*x+y*y);
  const inner=3000, outer=6500;
  if(r<inner||r>outer) return 0;
  return 1 - Math.abs((r - (inner+outer)/2)/1800);
}

/* ===== Procedural Planets (500) ===== */
let planets=[];
for(let i=0;i<500;i++){
  let host=stars[Math.floor(Math.random()*stars.length)];
  let orb=15+Math.random()*160;

  let radius=0.5+Math.random()*2.5;
  let temp=150+Math.random()*400;
  let flux=0.1+Math.random()*2.5;
  let water=Math.random();
  let atmo=Math.random();

  let o2=Math.random()*0.21;
  let ch4=Math.random()*0.02;
  let co2=Math.random()*0.1;

  planets.push({
    name:"PX-"+(1000+i),
    x:host.x+(Math.random()-0.5)*orb,
    y:host.y+(Math.random()-0.5)*orb,
    z:host.z+(Math.random()-0.5)*orb,

    radius,temp,flux,water,atmo,o2,ch4,co2,

    angle:Math.random()*Math.PI*2,
    dist:orb,
    screen:{x:0,y:0},

    esi:0,iels:0,life:0
  });
}

/* ===== Scoring Models ===== */
function esi(p){
  const r=Math.abs((p.radius-1)/(p.radius+1));
  const t=Math.abs((p.temp-288)/(p.temp+288));
  return 1 - (r*0.5 + t*0.5);
}
function iels(p){
  let a=Math.exp(-Math.abs(p.temp-288)/95);
  let b=p.water;
  let c=p.atmo;
  let d=Math.exp(-Math.abs(p.flux-1)/1.3);
  return a*0.35 + b*0.35 + c*0.15 + d*0.15;
}
function life(p){
  let bios=(p.o2*p.ch4)>0.0004?1:0;
  return p.iels*0.55 + p.esi*0.35 + bios*0.10;
}

/* Compute all */
for(let p of planets){
  p.esi=esi(p);
  p.iels=iels(p);
  p.life=life(p);
}

/* ===== MODES ===== */
let mode="life";

/* ===== Rendering ===== */
function render(){
  ctx.fillStyle="#000";
  ctx.fillRect(0,0,canvas.width,canvas.height);

  nebula();

  /* Stars */
  for(let s of stars){
    const d=s.z/7000;
    const x=canvas.width/2+(s.x-cam.x)*cam.zoom/d;
    const y=canvas.height/2+(s.y-cam.y)*cam.zoom/d;

    let ghz=ghzWeight(s.x,s.y);
    ctx.fillStyle = starColor(s.type,ghz);
    ctx.fillRect(x,y,1.2,1.2);
  }

  /* Planet Orbits */
  for(let p of planets){
    p.angle+=0.00025;
    p.x += Math.cos(p.angle)*0.12;
    p.y += Math.sin(p.angle)*0.12;
  }

  /* Planets */
  for(let p of planets){
    const d=p.z/7000;
    const x=canvas.width/2+(p.x-cam.x)*cam.zoom/d;
    const y=canvas.height/2+(p.y-cam.y)*cam.zoom/d;

    let C;
    if(mode==="life"){
      let L=Math.min(1,p.life);
      C=`rgb(${(1-L)*0}, ${150 + L*105}, 255)`;
    }
    else if(mode==="esi"){
      let E=p.esi;
      C=`rgb(${(1-E)*50}, ${E*255}, ${255 - E*120})`;
    }
    else if(mode==="temp"){
      let T = Math.min(1, p.temp/600);
      C=`rgb(${T*255}, ${(1-T)*255}, 255)`;
    }
    else { // star-type mode for planets (blue-cyan)
      C=`rgb(80,180,255)`;
    }

    ctx.beginPath();
    ctx.fillStyle=C;
    ctx.arc(x,y,3+p.life*4,0,Math.PI*2);
    ctx.fill();

    p.screen.x=x; p.screen.y=y;
  }

  requestAnimationFrame(render);
}
render();

/* ===== Planet Inspector ===== */
canvas.addEventListener("click", e=>{
  for(let p of planets){
    if(Math.hypot(e.clientX-p.screen.x,e.clientY-p.screen.y)<10){
      document.getElementById("info").innerHTML=`
        <b>${p.name}</b><br><br>
        Radius: ${p.radius.toFixed(2)} R⊕<br>
        Temp: ${p.temp.toFixed(0)} K<br>
        Flux: ${p.flux.toFixed(2)} F⊕<br><br>
        Earth Similarity: ${(p.esi*100).toFixed(1)}%<br>
        IELS: ${(p.iels*100).toFixed(1)}%<br>
        Life Probability: ${(p.life*100).toFixed(1)}%<br><br>
        Water: ${(p.water*100).toFixed(1)}%<br>
        Atmosphere: ${(p.atmo*100).toFixed(1)}%<br><br>
        O₂: ${(p.o2*100).toFixed(2)}%<br>
        CH₄: ${(p.ch4*100).toFixed(2)}%<br>
        CO₂: ${(p.co2*100).toFixed(2)}%<br>
      `;
    }
  }
});
</script>

</body>
</html>
